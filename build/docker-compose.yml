version: '3'
services:

    # The base image that provides the PHP runtime and composer packages
    # which are requried by the application. To (re-)build the image use:
    #
    #  docker-compose run --rm composer install
    #  docker-compose build
    #
    base:
        # Specify a tag name for your base image here:
        image: myapp-base:1.0
        build: ./

    # The composer container to manage composer packages for the build process
    # in ./vendor.
    #
    # You will usually only ever run one of these commands:
    #
    #  docker-compose run --rm composer require [...]
    #  docker-compose run --rm composer update [...]
    #
    # When changing packages you must rebuild the base container.
    #
    composer:
        image: composer
        volumes:
            - ./:/app
            - ./:/var/www
        entrypoint: composer
